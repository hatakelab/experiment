<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>Hello, WebAssembly!</title>
</head>
<body>
    <p id="p"></p>
    <script>
        const wasm = 'experiment.wasm';
        window.onload = function() {
            fetch(wasm)
                .then(response => response.arrayBuffer())
                .then(bytes => WebAssembly.instantiate(bytes, {}))
                .then(results => { // resultsはResultObject
                    // results.instance.exports.addで関数にアクセス
                    document.getElementById('p').textContent = results.instance.exports.add(1, 2);
                })
                .catch(console.error); // エラーハンドリングを追加
        }
    </script>
</body>
</html>
